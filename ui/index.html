<!DOCTYPE html>
<html lang="fr" data-theme="ptcg-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon TCG Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4/dist/full.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="min-h-screen">

    <!-- Navbar fixe 48px -->
    <nav class="navbar fixed top-0 z-10 h-12 px-4 bg-base-200 border-b border-base-300">
        <div class="flex flex-1 gap-1">
            <button class="tab tab-active" data-tab="dashboard">Dashboard</button>
            <button class="tab" data-tab="history">Historique</button>
            <button class="tab" data-tab="decks">Decks</button>
            <button class="tab" data-tab="config">Config</button>
        </div>
        <!-- Toggle th√®me -->
        <label class="swap swap-rotate ml-auto cursor-pointer" title="Basculer le th√®me">
            <input id="theme-toggle" type="checkbox">
            <span class="swap-on text-lg">‚òÄÔ∏è</span>
            <span class="swap-off text-lg">üåô</span>
        </label>
    </nav>

    <!-- Contenu principal -->
    <main class="pt-14 max-w-[1100px] mx-auto px-4">

        <!-- Onglet Dashboard (Epic 4 stories 4.2‚Äì4.6) -->
        <section id="tab-dashboard">
            <div class="kpi-row"><!-- Story 4.2 : stats-bar.js --></div>
            <div class="charts-row"><!-- Story 4.3 : chart-winrate.js | Story 4.6 : detail-panel --></div>
            <div class="table-section"><!-- Story 4.4 : match-table.js --></div>
        </section>

        <!-- Onglet Historique (placeholder Story 4.4) -->
        <section id="tab-history" class="hidden">
            <!-- Story 4.4 : match-table.js -->
        </section>

        <!-- Onglet Decks (contenu Story 2.1) -->
        <section id="tab-decks" class="hidden">
            <h2>Mes Decks</h2>

            <!-- Formulaire cr√©ation -->
            <div class="deck-form">
                <input id="deck-name-input" type="text" placeholder="Nom du deck" maxlength="100">
                <button id="deck-create-btn">Cr√©er</button>
                <p id="deck-form-error" class="error-inline" style="display:none;"></p>
            </div>

            <!-- Liste des decks -->
            <div id="decks-list"></div>
        </section>

        <!-- Onglet Config (contenu Stories 2.2‚Äì2.4) -->
        <section id="tab-config" class="hidden">
            <h2>Configuration</h2>

            <div class="config-group">
                <h3>R√©gion MUMU</h3>
                <div id="config-region-display" class="region-display"></div>
                <button id="config-region-select-btn">Configurer la r√©gion MUMU</button>
                <p id="config-status" class="config-status" style="display:none;"></p>
            </div>

            <div class="config-group">
                <h3>Deck actif</h3>
                <label for="active-deck-select">Deck utilis√© pour la prochaine session :</label>
                <select id="active-deck-select">
                    <option value="">‚Äî Aucun deck actif ‚Äî</option>
                </select>
                <p id="active-deck-confirm" class="config-confirm" style="display:none;"></p>
            </div>

            <div class="config-group">
                <h3>Test de capture en direct</h3>
                <p id="capture-status-text" class="capture-status"></p>
                <button id="capture-test-btn">Tester la capture</button>
                <p id="capture-error" class="error-inline" style="display:none;"></p>
                <img id="capture-preview" alt="Aper√ßu capture MUMU" style="display:none; max-width:100%; margin-top:8px;">
            </div>
        </section>

    </main>

    <!-- Detail Panel (Story 4.6 ‚Äî slide-in depuis droite) -->
    <aside id="detail-panel" class="detail-panel">
        <!-- contenu inject√© dynamiquement par detail-panel.js -->
    </aside>

    <!-- Scripts composants existants -->
    <script src="components/deck-manager.js"></script>
    <script src="components/config-manager.js"></script>
    <script src="components/capture-test.js"></script>
    <script src="components/active-deck-selector.js"></script>
    <!-- Scripts Epic 4 (stubs ‚Äî impl√©ment√©s dans stories 4.2‚Äì4.6) -->
    <script src="components/stats-bar.js"></script>
    <script src="components/chart-winrate.js"></script>
    <script src="components/match-table.js"></script>
    <script src="components/detail-panel.js"></script>
    <script src="app.js"></script>
</body>
</html>
